<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ëŒ€ë©´ì˜ˆë°°Â·ê¸°ë„ì ë™ê·¸ë¼ë¯¸ ì¹´ìš´í„°</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body{font-family:system-ui, sans-serif; margin:0; padding:2rem; background:#f9fafb; color:#111827;}
    h1{font-size:1.5rem; margin-bottom:1rem;}
    textarea{width:100%; min-height:220px; padding:1rem; border:1px solid #d1d5db; border-radius:0.5rem; resize:vertical; background:#fff; box-sizing:border-box;}
    button{margin-top:1rem; padding:0.75rem 1.5rem; border:none; border-radius:0.5rem; font-size:1rem; cursor:pointer; background:#2563eb; color:#fff;}
    button:hover{background:#1d4ed8;}
    .results{margin-top:2rem; background:#fff; padding:1rem; border-radius:0.5rem; box-shadow:0 1px 3px rgba(0,0,0,0.1); white-space:pre-wrap;}
    .notice{font-size:0.9rem; color:#6b7280;}
  </style>
</head>
<body>
  <h1>ğŸ•Šï¸ 3íŒ€ ì˜ˆë°°/ê¸°ë„ì â­•ï¸ ì¹´ìš´í„°</h1>
  <p>ì ê²€í‘œ í…ìŠ¤íŠ¸ë¥¼ ë¶™ì—¬ë„£ê³  <strong>"ì¹´ìš´íŠ¸!"</strong>ë¥¼ ëˆ„ë¥´ë©´ ì•„ë˜ í˜•ì‹ìœ¼ë¡œ ê²°ê³¼ê°€ ì¶œë ¥ë©ë‹ˆë‹¤.</p>
  <p class="notice">â€» í˜•ì‹ ì˜ˆì‹œ â†“
1. ëŒ€ë©´ì˜ˆë°°
8ì‹œë°˜ 00ëª… â€¦
2. ê¸°ë„ì
ì£¼ì¼ 00ëª… â€¦
ì´í•©
ëŒ€ë©´ì˜ˆë°° 00ëª…
ê¸°ë„ì 00ëª…
ì „ì²´ 00ëª…</p>

  <textarea id="input" placeholder="ì—¬ê¸°ì— í…ìŠ¤íŠ¸ë¥¼ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”..."></textarea>
  <button id="countBtn">ì¹´ìš´íŠ¸!</button>
  <div id="output" class="results" style="display:none;"></div>

<script>
const btn = document.getElementById('countBtn');
const output = document.getElementById('output');
btn.addEventListener('click', () => {
  // ì…ë ¥ í…ìŠ¤íŠ¸ì—ì„œ VS16(variation selector) ì œê±°í•˜ì—¬ â­•ë§Œ ë‚¨ê¹€
  let rawText = document.getElementById('input').value;
  const text = rawText.replace(/\uFE0F/g, '');
  if (!text.trim()) return;

  const faceTimes = { '8ì‹œë°˜': 0, '12ì‹œ': 0, '15ì‹œë°˜': 0, '19ì‹œë°˜': 0, 'ì›”10ì‹œ': 0, 'ì›”20ì‹œ': 0 };
  const prayTimes = { 'ì£¼ì¼': 0, 'ì›”ìš”ì¼': 0 };
  let section = '';
  let subSection = '';
  let isMonday = false;

  text.split(/\n/).forEach(raw => {
    const line = raw.trim();
    if (/^1\./.test(line) && line.includes('ëŒ€ë©´')) { section = 'face'; subSection = ''; isMonday = false; return; }
    if (/^2\./.test(line) && line.includes('ê¸°ë„ì')) { section = 'pray'; subSection = ''; return; }

    if (section === 'face') {
      if (line.startsWith('* ì›”ìš”ì¼')) { isMonday = true; return; }
      const tMatch = line.match(/-\s*(\d{1,2}ì‹œ(?:ë°˜)?)/);
      if (tMatch) {
        subSection = tMatch[1];
        if (isMonday && /^(10|20)ì‹œ$/.test(subSection)) subSection = 'ì›”' + subSection;
        return;
      }
      // VS16 ì œê±° í›„ U+2B55(â­•)ë§Œ ì„¸ê¸°
      const circles = (line.match(/â­•/g) || []).length;
      if (circles > 0 && subSection && faceTimes.hasOwnProperty(subSection)) faceTimes[subSection] += circles;
    } else if (section === 'pray') {
      if (line.startsWith('- ì£¼ì¼')) { subSection = 'ì£¼ì¼'; return; }
      if (line.startsWith('- ì›”ìš”ì¼')) { subSection = 'ì›”ìš”ì¼'; return; }
      const circles = (line.match(/â­•/g) || []).length;
      if (circles > 0 && subSection && prayTimes.hasOwnProperty(subSection)) prayTimes[subSection] += circles;
    }
  });

  const faceTotal = Object.values(faceTimes).reduce((a, b) => a + b, 0);
  const prayTotal = Object.values(prayTimes).reduce((a, b) => a + b, 0);
  const grandTotal = faceTotal + prayTotal;

  let result = '1. ëŒ€ë©´ì˜ˆë°°\n';
  ['8ì‹œë°˜', '12ì‹œ', '15ì‹œë°˜', '19ì‹œë°˜', 'ì›”10ì‹œ', 'ì›”20ì‹œ'].forEach(t => { result += `${t} ${faceTimes[t]}ëª…\n`; });
  result += '\n2. ê¸°ë„ì\n';
  ['ì£¼ì¼', 'ì›”ìš”ì¼'].forEach(t => { result += `${t} ${prayTimes[t]}ëª…\n`; });
  result += '\nì´í•©\n';
  result += `ëŒ€ë©´ì˜ˆë°° ${faceTotal}ëª…\nê¸°ë„ì ${prayTotal}ëª…\nì „ì²´ ${grandTotal}ëª…`;

  output.textContent = result;
  output.style.display = 'block';
});
</script>
</body>
</html>
